# Запуск проекта
**sudo docker compose up -d** <br>
развернется на порте **5432** <br>
Название БД **shop** <br>
Завершение **sudo docker compose down**


# Задание 
Напишите SQL-запросы, которые выполняют следующие действия:
## BASIC
1. Возвращает список клиентов (имя и фамилия) с наибольшей общей суммой заказов.

2. Для каждого клиента из пункта 1 выводит список его заказов (номер заказа и общая сумма) в порядке убывания общей суммы заказов.

3. Выводит только тех клиентов, у которых общая сумма заказов превышает среднюю общую сумму заказов всех клиентов.

## PRO
Это усложненное задание потребует более сложного SQL-запроса, который будет включать агрегатные функции, подзапросы, условные выражения и объединения таблиц для анализа данных о клиентах, заказах, продуктах и отзывах. Удачи! <br>

1. Ваш SQL-запрос должен расшириться для учета общей суммы заказов и общего количества товаров, купленных каждым клиентом.

2. Заказы клиентов должны быть разделены на две категории: «Новые заказы» (заказы, созданные менее месяца назад) и «Старые заказы» (заказы, созданные более месяца назад).

3. Вам нужно рассчитать среднюю оценку продукта для каждого клиента на основе отзывов, оставленных ими о продуктах.

4. Выведите список клиентов вместе с их общей суммой заказов, общим количеством товаров, новыми и старыми заказами, а также средней оценкой продукта.


# Предметная область
1. Customers — информация о клиентах:
   - CustomerID (int, PK) — уникальный идентификатор клиента.
   - FirstName (varchar) — имя клиента.
   - LastName (varchar) — фамилия клиента.
   - Email (varchar) — адрес электронной почты клиента.

2. Orders — информация о заказах:
   - OrderID (int, PK) — уникальный идентификатор заказа.
   - CustomerID (int) — идентификатор клиента, совершившего заказ.
   - OrderDate (datetime) — дата и время создания заказа.
   - TotalAmount (decimal) — общая сумма заказа.

3. OrderDetails — информация о деталях заказов:
    - OrderDetailID (int, PK) — уникальный идентификатор детали заказа.
    - OrderID (int) — идентификатор заказа.
    - ProductID (int) — идентификатор продукта в заказе.
    - Quantity (int) — количество продуктов в заказе.
    - UnitPrice (decimal) — цена за единицу продукта.

4. Products — информация о продуктах:
    - ProductID (int, PK) — уникальный идентификатор продукта.
    - ProductName (varchar) — название продукта.
    - CategoryID (int) — идентификатор категории продукта.
    - Price (decimal) — цена продукта.

5. ProductReviews — информация об отзывах о продуктах:
    - ReviewID (int, PK) — уникальный идентификатор отзыва.
    - ProductID (int) — идентификатор продукта, к которому относится отзыв.
    - CustomerID (int) — идентификатор клиента, оставившего отзыв.
    - Rating (int) — оценка продукта от 1 до 5.
    - ReviewText (text) — текст отзыва.

# ER-диаграмма
![er diagramm](/2_3_task/er-diagram/er-shop-diagram.drawio.png)


