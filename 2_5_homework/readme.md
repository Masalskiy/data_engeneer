
# Запуск проекта
**sudo docker compose up -d** <br>
название базы данных **shop-electronic** <br>
разворачивается на порте **5434** <br>

для обновления витрины <br>
**REFRESH MATERIALIZED VIEW reader_list_books**


# Схема данных
Таблицы содержат информацию о продажах некоторых товаров в 3-х различных магазинах, а также таблицу с планами продаж на уровень каждого магазина и каждого товара. <br>

В таблицах вида «shop_…» представлена информация о количестве продаж того или иного товара за конкретный день. <br>

В таблице plan хранится информация о планировании по продажам тех или иных товаров на конец месяца. <br>

В таблице products хранится общая информация по каждому из товаров.<br>
![er diagramm](/2_5_homework/diagram/er-shop-diagram.drawio.png)


# Задание
Cобрать вашу первую витрину!<br>
разработать SQL-скрипт, который формирует таблицу со следующим набором атрибутов:

- shop_name — название магазина,
- product_name — название товара,
- sales_fact — количество фактических продаж на конец месяца,
- sales_plan — количество запланированных продаж на конец месяца,
- sales_fact/sales_plan — отношение количества фактических продаже к запланированному,
- income_fact — фактический доход,
- income_plan — планируемый доход,
- income_fact/income_plan — отношение фактического дохода к запланированному. 

# Задание PRO
добавить таблицу о промо-акциях на те или иные товары promo<br>
которая содержит информацию о том: 
- в каком магазине,
- в какой день, 
- на какой продукт 
- какого размера была скидка. <br>

Вам также нужно к итоговой витрине которую вы получили при выполнении базового задания, добавить несколько новых атрибутов:  

- avg(sales/date) - среднее количество продаж в день,
- max_sales - максимальное количество продаж за один день,
- date_max_sales - день, в который произошло максимальное количество продаж,
- date_max_sales_is_promo - факт того, действовала ли скидка в тот день, когда произошло максимальное количество продаж,
- avg(sales/date) / max_sales - отношение среднего количества продаж к максимальному,
- promo_len - количество дней месяце когда на товар действовала скидка,
- promo_sales_cnt - количество товаров проданных в дни скидок,
- promo_sales_cnt/fact_sales - отношение количества товаров проданных в дни скидки к общему количеству проданных товаров за месяц,
- promo_income - доход с продаж в дни акций,
- promo_income/fact_income - отношение дохода с продаж в дни акций к общему доходу с продаж за месяц

